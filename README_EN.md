# HP-ENVY-13-ad1XX-Hackintosh

A Configuration of Hackintosh for HP Envy 13
**Please Read `ReadME` carefully before you try it**

[中文](README.md) | [English](README_EN.md)

## Species

| Specs | Detail | Specs | Detail |
| :---: | :--- | :---: | :--- |
| Board | HP 83A8 | Platform | Clover Or Opencore Tested |
| CPU | Intel Core i5-8250U | Display | BOE070E |
| GPU | Intel Graphics UHD 620 | Shared VRAM | 128M |
| Audio | Realtec ALC295 | SMC | VirtualSMC |
| Network | Dell Wireless 1560 | TrackPad | VoodooPS2(Acidanthera Ver.) |
| Storage | WD SN750 | Bios | F18-F29 Tested |

## Update Log

### 2020-07-14

1. Update `Clover` to 5122
2. Update `OpenCore` to 0.6.1
3. Update All Kexts to latest stable version

**`Clover` branch support `macOS 10.15.6` and `OpenCore` branch support `macOS 11 beta 6`**
For more details, please visit [ChangeLog.md](./ChangeLog.md)

## 1. Abstract

**DO NOT TURN ON `FileValue Encryption`!!**
**Especially after OTA Update!!**
My Hackintosh works fine with the latest configuration on `10.15`. It might common to both `HP-ENVY 13 ad1XX` and `ad0XX`, but I don't try it. The repo was created by [daliansky](https://github.com/daliansky/), and I rewrite it to support `10.15`. 

## 2. Installation(This part need some time to translate)

1. Download your macOS image with suffix `dmg`;
2. Use tools like [`etcher`](https://www.balena.io/etcher/) to flash the OS image you have downloaded to SD card & USB drive;
3. Cope `CLOVER` folder from my repo to `EFI` folder in `EFI` partition at your hard drive, then add Clover to your boot options by tools like `bootice`;
4. Reboot your Computer and press `F10` before HP logo showing on screen to boot in `BIOS`, then select `CLOVER`  at `System Configutation`-`Boot Sequence`-`Operation System Boot Manager` and press `F6` to make it at the head of list, finally press twice `F10` to save your config and exit `BIOS`;
5. In `CLOVER` select `macOS Install from XXX(Your SD card & USB drive label)` to boot in macOS Install;
6. This step is same as real Mac, you can re-part your disk and so on. You need remember disk label you decide to install your macOS on;
7. Your device will reboot after install, then select `macOS Install from XXX (Disk label from Step 6)` in `CLOVER`, and reboot several times (you can take off your SD card & USB drive now). 
8. After Step 7 there will be a `macOS` option in `CLOVER`, select it and press `Enter`;
9. Please use `Clover Configurator` or other tools to **INJECT YOUR OWN MLB, SN and UUID**，then turn off `Power Nap` and `Wake for network access` in **ALL** parts of `Battery` at `System Preferance`. After all of these, you have installed macOS on your pc **successfully**. 

## 3. Customization

Before you try all parts with `NOT NEED` tag, please make sure you have ability to fix some unknown error.

### 1. Display

If you are using a 1080P(FHD) screen, please notice：
1. （not need）Use [xzhih/one-key-hidpi](https://github.com/xzhih/one-key-hidpi) to enable HiDPI；

If you are using a 4K(UHD) screen, please notice：
1. Use `Clover Configurator` to edit `CLOVER\Config.plist`, and change `UIScale` and `EFILoginHiDPI` to `2` in `Boot Graphics`；
2. Use `Clover Configurator` to edit `CLOVER\Config.plist`, and change the `Theme` part to `Outlines1080` in `GUI` part, or use `Other Text Editor (Such as NotePad)` to replace `Outlines` to `Outlines4k`;

If you meet some Color Depth issues, please customize your own display file by `Hackintool`. Or you can try the display file in `POST-Install\DisplayFile` which is generated by me if you are using AD1XX with 1080P. To use display file you need cope it to `Clover\Kexts\Other`. If you meet this issue on AD0XX, please change device-id to `16190000` and plantform-id to `00001B19` at `Device`-`Properties`-`PciRoot(0x0)/Pci(0x2,0x0)` in `CLOVER\config.plist` by `Clover Configurator` or other tools. After that save and reboot to take effect. 
If your device couldn't connect externel display (might be left side Type-C), please downgrade bios to `F18`.

### 2. CPU Frequence

If you are **not** using i5-8250U，please notice：
1. (**Must**)Please Insure you have already boot in your macOS normally；
2. (**Must**)Delete `CLOVER\Kexts\Other\CPUFriendDataProvider.kext`;
3. (**Must**)Use [stevezhengshiqi/one-key-cpufriend](https://github.com/stevezhengshiqi/one-key-cpufriend/blob/master/README_CN.md) to generate a new `CPUFriendDataProvider.kext` and place it in `CLOVER\Kexts\Other`;

Please make sure you are using the latest bios if you think your hackintosh has some issues about performence.

### 3.BackLight（Not Need）

The Backlight Level has been customized and no modification required. If you still need adjust backlight level, please edit Method `_BCL` from Device `PNLF` in `CLOVER/ACPI/patched/SSDT-BRT6.dsl`. Method `_BCL` returns a Package with 19 numbers, then the first and the last one are maximum level (and it's not a good idea to change these two number). The second one controls the backlight level which will be used when macOS is going to sleep. You can make yourself between 4 and 18(in dec), then save, compile and cope it to `CLOVER/ACPI/pathched/SSDT-BRT6.aml`. After that reboot to take effect.

### 4. Discrete Graphic（MX150）and SD Card reader

Impossible for now.

### 5. Audio

Due to my poor knowledge aboud sound card, I couldn't make four-speaker work, only buttom two-speaker (Now I'm using and layout-id is 0x03) or above two-speaker (layout-id is 0x1C). If you have some idea, welcome for pr.

### 6. Wireless Card

`DW1560` is the best choise for hackintosh on this device, or you can try drivers of this [guy](https://github.com/OpenIntelWireless). He writes Intel Wireless card driver and makes the cards work fine on some device!(Really Amazing!) Also you can use Android Personal Hotpot. 
**Tips**:
If you are using `DW1560` under `Windows`, please use wireless card driver from `Windows Update` but not `DELL Support`. 
If you try to use `DW1820a`, good luck to you :)

### 7. Hard Drive

Due to HP, the SSD works not very perfect. I have tried to fix it but I failed. I suggest using other high performance SSD. 

### 8. SMC(Not Need)

The default one is `VirtualSMC` made by [Acidanthera](https://github.com/acidanthera), and works well. If you need you can try FakeSMC made by [Clover Team](https://github.com/CloverHackyColor), and all files you might need are in `POST-Install/FakeSMC`. 

| No| Path | Delete| Add |
| :---: | :--- | :--- | :--- |
| 1 | `CLOVER\Kext\Other` | All Kext files (folders) which name contain `SMC` | All `Kext` files (folders) in `POST-Install/FakeSMC` |
| 2 | `CLOVER\drivers\UEFI` | VirtualSMC.efi | SMCHelper.efi |

If you have booted macOS with `VirtualSMC`, you also need reset `NVRAM`（press `F11` at `Clover`）。

### 9. Battery(Not Need)

Battery is completed by `VirtualSMC` and its components, but if you want try `FakeSMC` or you think there are some issues about battery percentage, you can try SSDT in`POST-Install/Battery`. To use it you need cope`SSDT-BAT0.aml` to `CLOVER\ACPI\patched`, and add `SSDT-BAT0.aml` at `SortedOrder` in `config.plist`. 

### 10. Trackpad(Not Need)

Trackpad Kext comes from [Acidanthera](https://github.com/acidanthera), and it's the best `ps2 trackpad` kext in hackintosh I think. If you need, you can replace it to `ApplePS2SmartTouchPad`or the [Rehabman](https://bitbucket.org/%7Be26fb9ce-5cc2-4e36-8576-7a8faae8e194%7D/) version.

## 4. Issues

1. All things except external display have been tested；
2. If you find some issues or bugs, Please PR.

## 5. And more... 

`ENVY 13 ad1XX` is my girlfriend's pc. She bought a `iPad Air 3` before I made this configuration(Yes, for her). I will update `Kexts` but for some issues and bugs will need some time. <br />

DW1820A works not very well on my device, but works perfect on other device. You can try DW1820A, but I couldn't promise it will work on your device. (On my device, I can boot in system with 1820a but system will freeze in 5 mins) 

## Thanks

All (names are arranged) in no particular order: <br>
[Acidanthera](https://github.com/acidanthera) for lots of kexts,[Clover Team](https://github.com/CloverHackyColor) for bootloader and FakeSMC kexts, [Daliansky](https://github.com/daliansky/) and his [blog](https://blog.daliansky.net/) for his configuration and sleep fix, [Bat.bat](https://github.com/williambj1) for Envy 13 bright function key and Battery hotpatch, [Aris](https://ariser.cn) for HDMI patch, [JardenLiu](https://github.com/jardenliu) for XPS15 and taught me a lot in Hackintosh, [Rehabman](https://bitbucket.org/%7Be26fb9ce-5cc2-4e36-8576-7a8faae8e194%7D/) for series of hotpatches, and lots of friends test and suggestions. 



Do NOT use this project for commercial purposes<br />
QQ Group:
惠普电脑装Mac交流群：543758684<br>
ENVY13(2017)交流群：247548827<br>
